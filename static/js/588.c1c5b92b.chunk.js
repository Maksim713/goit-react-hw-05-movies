"use strict";(self.webpackChunkcinesearch=self.webpackChunkcinesearch||[]).push([[588],{4399:function(e,t,n){n.d(t,{k:function(){return u}});var r=n(2791),s=n(7689),u=function(){var e=(0,s.TH)().pathname,t=(0,r.useRef)(e);return(0,r.useEffect)((function(){""===t.current&&(t.current=e)}),[e]),t.current}},1588:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(9439),s=n(7772),u=n(2791),a="Movies_container__+-Cnt",c="Movies_moreBtn__-8L4E",o=n(5700),i=n(4399),l=n(1087),f="MoviesSearchList_catalogFilms__ebybB",h="MoviesSearchList_catalogCard__+Nepi",v=n(184);var d=function(e){var t=e.movies,n=(0,i.k)();return(0,v.jsx)("ul",{className:f,children:t.map((function(e){var t=e.id,r=e.title;return(0,v.jsx)("li",{className:h,children:(0,v.jsx)(l.OL,{to:"".concat(n,"/").concat(t),children:r})},t)}))})},g=n(3433),m=n(7488);var _=function(){var e=(0,u.useContext)(s.$),t=e.search,n=e.setTotalResults,i=e.setMoviesCount,l=e.updateMovies,f=function(e){var t=e.search,n=(0,u.useState)(!1),s=(0,r.Z)(n,2),a=s[0],c=s[1],o=(0,u.useState)(null),i=(0,r.Z)(o,2),l=i[0],f=i[1],h=(0,u.useState)([]),v=(0,r.Z)(h,2),d=v[0],_=v[1],p=(0,u.useState)(0),Z=(0,r.Z)(p,2),x=Z[0],S=Z[1],j=(0,u.useState)(1),C=(0,r.Z)(j,2),E=C[0],b=C[1],k=(0,u.useState)(null),M=(0,r.Z)(k,2),R=M[0],w=M[1],L=(0,u.useRef)(t),N=(0,u.useRef)(E);return(0,u.useEffect)((function(){if(""!==t){if(L.current!==t||N.current!==E)return L.current=t,c(!0),(0,m.qF)(t,E).then((function(e){var n=e.results,r=e.total_pages,s=e.total_results;if(0===s)throw new Error('Your search "'.concat(t,'" brought result: 0. Change it.'));f(null),_((function(e){return L.current===t?(0,g.Z)(n):[].concat((0,g.Z)(e),(0,g.Z)(n))})),S(s),w(r)})).catch((function(e){f(e.message),_([]),b(1)})).finally((function(){return c(!1)})),function(){};f('Change your search "'.concat(t,'" by new, please.'))}}),[t,E,S]),{error:l,loading:a,page:E,setPage:b,movies:d,totalPages:R,totalResults:x}}({search:t}),h=f.error,_=f.loading,p=f.page,Z=f.setPage,x=f.movies,S=f.totalPages,j=f.totalResults,C=(0,u.useState)([]),E=(0,r.Z)(C,2),b=E[0],k=E[1];return(0,u.useEffect)((function(){Z(1)}),[t,Z]),(0,u.useEffect)((function(){localStorage.setItem("previousPage","/movies")}),[]),(0,u.useEffect)((function(){i(x.length),n(j),k(x),l(x)}),[b,i,n,j,x,l]),(0,v.jsx)("div",{className:a,children:(0,v.jsxs)(o.Z,{children:[!h&&(null===b||void 0===b?void 0:b.length)>0&&(0,v.jsx)(d,{movies:b}),h&&(0,v.jsxs)("div",{children:["Error: ",h]}),_&&(0,v.jsx)("div",{children:"Loading..."}),!_&&!h&&p<S&&(0,v.jsxs)("button",{className:c,onClick:function(){return Z((function(e){return e+1}))},children:["More ",p,"/",S]})]})})}}}]);
//# sourceMappingURL=588.c1c5b92b.chunk.js.map