{"version":3,"file":"static/js/588.87424a12.chunk.js","mappings":"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","sources":["hooks/useOriginPath.js","webpack://goit-react-hw-05-movies/./src/pages/Movies/Movies.module.css?82ee","webpack://goit-react-hw-05-movies/./src/components/MoviesSearchList/MoviesSearchList.module.css?457d","components/MoviesSearchList/MoviesSearchList.jsx","pages/Movies/Movies.jsx","pages/Movies/useSearch.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nexport const useOriginPath = () => {\n  const { pathname } = useLocation();\n  const originPath = useRef(pathname);\n  useEffect(() => {\n    if (originPath.current !== '') return;\n    originPath.current = pathname;\n  }, [pathname]);\n  return originPath.current;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Movies_container__+-Cnt\",\"moreBtn\":\"Movies_moreBtn__-8L4E\"};","// extracted by mini-css-extract-plugin\nexport default {\"catalogFilms\":\"MoviesSearchList_catalogFilms__ebybB\",\"catalogCard\":\"MoviesSearchList_catalogCard__+Nepi\"};","import { useOriginPath } from 'hooks/useOriginPath';\nimport { NavLink } from 'react-router-dom';\nimport css from './MoviesSearchList.module.css';\n\nfunction MoviesSearchList({ movies }) {\n  const originPath = useOriginPath();\n\n  return (\n    <ul className={css.catalogFilms}>\n      {movies.map(({ id, title }) => (\n        <li key={id} className={css.catalogCard}>\n          <NavLink to={`${originPath}/${id}`}>{title}</NavLink>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default MoviesSearchList;\n","import { moviesSearchValueCtx } from 'context/moviesSearchValueCtx ';\nimport { useContext, useEffect } from 'react';\nimport css from './Movies.module.css';\nimport Container from 'components/Container/Container';\nimport MoviesSearchList from 'components/MoviesSearchList/MoviesSearchList';\nimport { useSearch } from './useSearch';\n\nfunction Movies() {\n  const { search, setTotalResults, setMoviesCount } =\n    useContext(moviesSearchValueCtx);\n  const { error, loading, page, setPage, movies, totalPages, totalResults } =\n    useSearch({ search });\n\n  useEffect(() => {\n    setMoviesCount(movies.length);\n    setTotalResults(totalResults);\n  }, [movies.length, setMoviesCount, setTotalResults, totalResults]);\n\n  return (\n    <div className={css.container}>\n      <Container>\n        {!error && movies?.length > 0 && <MoviesSearchList movies={movies} />}\n        {error && <div>Error: {error}</div>}\n        {loading && <div>Loading...</div>}\n        {!loading && !error && page < totalPages && (\n          <button className={css.moreBtn} onClick={() => setPage(p => p + 1)}>\n            More {page}/{totalPages}\n          </button>\n        )}\n      </Container>\n    </div>\n  );\n}\n\nexport default Movies;\n","import { useEffect, useRef, useState } from 'react';\nimport { searchMovie } from '../../services/themoviedbApi';\n\nexport const useSearch = ({ search }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [movies, setMovies] = useState([]);\n\n  const [totalResults, setTotalResults] = useState(0);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(null);\n\n  const searchRef = useRef(search);\n  const pageRef = useRef(page);\n\n  useEffect(() => {\n    if (search === '') return;\n    if (searchRef.current === search && pageRef.current === page) {\n      setError(`Change your search \"${search}\" by new, please.`);\n      return;\n    }\n    searchRef.current = search;\n    setLoading(true);\n    searchMovie(search, page)\n      .then(data => {\n        const {\n          results,\n          total_pages: totalPages,\n          total_results: totalResults,\n        } = data;\n        if (totalResults === 0) {\n          throw new Error(\n            `Your search \"${search}\" brought result: 0. Change it.`\n          );\n        }\n        setError(null);\n        setMovies(p =>\n          searchRef.current === search ? [...p, ...results] : [...results]\n        );\n        setTotalResults(totalResults);\n        setTotalPages(totalPages);\n      })\n      .catch(e => {\n        setError(e.message);\n        setMovies([]);\n        setPage(1);\n      })\n      .finally(() => setLoading(false));\n    return () => {};\n  }, [search, page, setTotalResults]);\n\n  return { error, loading, page, setPage, movies, totalPages, totalResults };\n};\n"],"names":["useOriginPath","pathname","useLocation","originPath","useRef","useEffect","current","movies","className","css","map","id","title","to","useContext","moviesSearchValueCtx","search","setTotalResults","setMoviesCount","useState","loading","setLoading","error","setError","setMovies","totalResults","page","setPage","totalPages","setTotalPages","searchRef","pageRef","searchMovie","then","data","results","total_pages","total_results","Error","p","catch","e","message","finally","useSearch","length","Container","onClick"],"sourceRoot":""}