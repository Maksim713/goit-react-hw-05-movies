"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[588],{4399:function(e,t,n){n.d(t,{k:function(){return a}});var r=n(2791),s=n(7689),a=function(){var e=(0,s.TH)().pathname,t=(0,r.useRef)(e);return(0,r.useEffect)((function(){""===t.current&&(t.current=e)}),[e]),t.current}},1588:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(7772),s=n(2791),a="Movies_container__+-Cnt",u="Movies_moreBtn__-8L4E",c=n(5700),o=n(4399),i=n(1087),l="MoviesSearchList_catalogFilms__ebybB",f="MoviesSearchList_catalogCard__+Nepi",h=n(184);var v=function(e){var t=e.movies,n=(0,o.k)();return(0,h.jsx)("ul",{className:l,children:t.map((function(e){var t=e.id,r=e.title;return(0,h.jsx)("li",{className:f,children:(0,h.jsx)(i.OL,{to:"".concat(n,"/").concat(t),children:r})},t)}))})},_=n(3433),d=n(9439),g=n(7488);var m=function(){var e=(0,s.useContext)(r.$),t=e.search,n=e.setTotalResults,o=e.setMoviesCount,i=function(e){var t=e.search,n=(0,s.useState)(!1),r=(0,d.Z)(n,2),a=r[0],u=r[1],c=(0,s.useState)(null),o=(0,d.Z)(c,2),i=o[0],l=o[1],f=(0,s.useState)([]),h=(0,d.Z)(f,2),v=h[0],m=h[1],p=(0,s.useState)(0),x=(0,d.Z)(p,2),Z=x[0],j=x[1],C=(0,s.useState)(1),S=(0,d.Z)(C,2),b=S[0],k=S[1],w=(0,s.useState)(null),E=(0,d.Z)(w,2),M=E[0],R=E[1],L=(0,s.useRef)(t),N=(0,s.useRef)(b);return(0,s.useEffect)((function(){if(""!==t){if(L.current!==t||N.current!==b)return L.current=t,u(!0),(0,g.qF)(t,b).then((function(e){var n=e.results,r=e.total_pages,s=e.total_results;if(0===s)throw new Error('Your search "'.concat(t,'" brought result: 0. Change it.'));l(null),m((function(e){return L.current===t?[].concat((0,_.Z)(e),(0,_.Z)(n)):(0,_.Z)(n)})),j(s),R(r)})).catch((function(e){l(e.message),m([]),k(1)})).finally((function(){return u(!1)})),function(){};l('Change your search "'.concat(t,'" by new, please.'))}}),[t,b,j]),{error:i,loading:a,page:b,setPage:k,movies:v,totalPages:M,totalResults:Z}}({search:t}),l=i.error,f=i.loading,m=i.page,p=i.setPage,x=i.movies,Z=i.totalPages,j=i.totalResults;return(0,s.useEffect)((function(){o(x.length),n(j)}),[x.length,o,n,j]),(0,h.jsx)("div",{className:a,children:(0,h.jsxs)(c.Z,{children:[!l&&(null===x||void 0===x?void 0:x.length)>0&&(0,h.jsx)(v,{movies:x}),l&&(0,h.jsxs)("div",{children:["Error: ",l]}),f&&(0,h.jsx)("div",{children:"Loading..."}),!f&&!l&&m<Z&&(0,h.jsxs)("button",{className:u,onClick:function(){return p((function(e){return e+1}))},children:["More ",m,"/",Z]})]})})}}}]);
//# sourceMappingURL=588.87424a12.chunk.js.map